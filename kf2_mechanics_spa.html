<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Killing Floor 2 - Mechanics Reference</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #e0e6ed;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #ff6b35;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 2.5em;
        }

        .tab-container {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .tab-nav {
            display: flex;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: transparent;
            color: #e0e6ed;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            white-space: nowrap;
            min-width: 120px;
        }

        .tab-btn:hover {
            background: rgba(255,107,53,0.2);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: #ff6b35;
            color: white;
            box-shadow: 0 4px 15px rgba(255,107,53,0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .card {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,107,53,0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255,107,53,0.2);
            border-color: #ff6b35;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #ff6b35, #ff8c42);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            color: #ff6b35;
            font-size: 1.4em;
            font-weight: bold;
        }

        .card-type {
            background: rgba(255,107,53,0.2);
            color: #ff6b35;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .damage-list {
            margin: 10px 0;
        }

        .damage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 8px;
            background: rgba(255,255,255,0.05);
        }

        .damage-effective {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid #4caf50;
        }

        .damage-neutral {
            background: rgba(255, 193, 7, 0.2);
            border-left: 4px solid #ffc107;
        }

        .damage-resistant {
            background: rgba(244, 67, 54, 0.2);
            border-left: 4px solid #f44336;
        }

        /* Colorblind Accessibility Mode */
        .colorblind-mode .damage-effective {
            background: rgba(33, 150, 243, 0.2);
            border-left: 4px solid #2196f3;
        }

        .colorblind-mode .damage-neutral {
            background: rgba(158, 158, 158, 0.2);
            border-left: 4px solid #9e9e9e;
        }

        .colorblind-mode .damage-resistant {
            background: rgba(255, 152, 0, 0.2);
            border-left: 4px solid #ff9800;
        }

        .accessibility-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255,107,53,0.9);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .accessibility-toggle:hover {
            background: rgba(255,107,53,1);
            transform: scale(1.05);
        }

        .boss-phases {
            margin: 15px 0;
        }

        .phase {
            background: rgba(255,255,255,0.03);
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
            border-left: 4px solid #ff6b35;
        }

        .phase-title {
            color: #ff6b35;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .weakness-rank {
            display: inline-block;
            background: #ff6b35;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            font-weight: bold;
            margin-right: 10px;
        }

        .search-container {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid rgba(255,107,53,0.3);
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            color: #e0e6ed;
            font-size: 16px;
            backdrop-filter: blur(10px);
        }

        .search-input:focus {
            outline: none;
            border-color: #ff6b35;
            box-shadow: 0 0 20px rgba(255,107,53,0.3);
        }

        .search-input::placeholder {
            color: rgba(224, 230, 237, 0.6);
        }

        .filters {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid rgba(255,107,53,0.3);
            border-radius: 20px;
            background: transparent;
            color: #e0e6ed;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: #ff6b35;
            border-color: #ff6b35;
            color: white;
        }

        .mechanics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        .mechanic-section {
            background: rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid #ff6b35;
        }

        .mechanic-title {
            color: #ff6b35;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .mechanic-description {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .code-snippet {
            background: rgba(0,0,0,0.3);
            border-radius: 6px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 10px 0;
            border-left: 3px solid #ff6b35;
        }

        .tooltip {
            position: relative;
            cursor: help;
            border-bottom: 1px dotted #ff6b35;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .tab-nav {
                flex-direction: column;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .mechanics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <button class="accessibility-toggle" id="colorblind-toggle">🎨 Colorblind Mode</button>
    
    <div class="container">
        <h1>🔥 Killing Floor 2 - Mechanics Reference 🔥</h1>
        
        <!-- 
        DEPLOYMENT NOTE: 
        This SPA includes localStorage preference saving for the colorblind toggle.
        In Claude.ai artifacts, localStorage is not available, so preferences reset on refresh.
        When you deploy this to your own environment, uncomment the localStorage lines in:
        - _loadColorblindPreference()
        - _saveColorblindPreference() 
        This will enable persistent user preferences across visits.
        -->
        
        <div class="tab-container">
            <div class="tab-nav">
                <button class="tab-btn active" data-tab="enemies">Enemies</button>
                <button class="tab-btn" data-tab="bosses">Bosses</button>
                <button class="tab-btn" data-tab="damage-types">Damage Types</button>
                <button class="tab-btn" data-tab="mechanics">Core Mechanics</button>
                <button class="tab-btn" data-tab="tactics">Tactical Guide</button>
            </div>

            <div id="enemies" class="tab-content active">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search enemies..." id="enemy-search">
                </div>
                <div class="filters">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="lesser">Lesser</button>
                    <button class="filter-btn" data-filter="medium">Medium</button>
                    <button class="filter-btn" data-filter="large">Large</button>
                </div>
                
                <div class="damage-legend" style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; margin-bottom: 20px; border-left: 4px solid #ff6b35;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h4 style="color: #ff6b35; margin: 0;">🎯 Damage Effectiveness Guide:</h4>
                        <small style="opacity: 0.7;"><em>Colorblind toggle available top-right →</em></small>
                    </div>
                    <div id="standard-legend" style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(76, 175, 80, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>🟢 <strong>GREEN</strong> = HIGHLY EFFECTIVE (Double+ Damage)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(255, 193, 7, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>🟡 <strong>YELLOW</strong> = NORMAL (Standard Damage)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(244, 67, 54, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>🔴 <strong>RED</strong> = RESISTANT (Reduced Damage)</span>
                        </div>
                    </div>
                    <div id="colorblind-legend" style="display: none; gap: 20px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(33, 150, 243, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>⬆️ <strong>BLUE</strong> = HIGHLY EFFECTIVE (Double+ Damage)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(158, 158, 158, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>➡️ <strong>GRAY</strong> = NORMAL (Standard Damage)</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 20px; height: 20px; background: rgba(255, 152, 0, 0.8); border-radius: 50%; display: inline-block;"></span>
                            <span>⬇️ <strong>ORANGE</strong> = RESISTANT (Reduced Damage)</span>
                        </div>
                    </div>
                </div>
                
                <div class="card-grid" id="enemy-grid"></div>
            </div>

            <div id="bosses" class="tab-content">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search bosses..." id="boss-search">
                </div>
                
                <div class="damage-legend" style="background: rgba(255,255,255,0.1); border-radius: 8px; padding: 15px; margin-bottom: 20px; border-left: 4px solid #ff6b35;">
                    <h4 style="color: #ff6b35; margin-bottom: 10px;">👑 Boss Damage Rankings:</h4>
                    <p style="margin: 0;"><strong>Numbers = Priority Order:</strong> 1 = Most Effective → 3 = Least Effective</p>
                    <p style="margin: 5px 0 0 0; font-size: 0.9em; opacity: 0.8;"><em>Use the colorblind toggle (top-right) for accessibility options</em></p>
                </div>
                
                <div class="card-grid" id="boss-grid"></div>
            </div>

            <div id="damage-types" class="tab-content">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Search damage types..." id="damage-search">
                </div>
                <div class="card-grid" id="damage-grid"></div>
            </div>

            <div id="mechanics" class="tab-content">
                <div class="mechanics-grid" id="mechanics-grid"></div>
            </div>

            <div id="tactics" class="tab-content">
                <div class="mechanics-grid" id="tactics-grid"></div>
            </div>
        </div>
    </div>

    <script>
        // Core Data Architecture
        const _kf2Data = {
            enemies: [
                {
                    name: "Cyst",
                    type: "lesser",
                    health: { head: 15, body: 55 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Head shots", "Any damage type"],
                    tactics: "Weakest ZED. Focus on headshots for quick elimination. Dangerous in large groups.",
                    shrinkModifier: 2.0
                },
                {
                    name: "Alpha Clot",
                    type: "lesser", 
                    health: { head: 25, body: 100 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Head shots", "High damage weapons"],
                    tactics: "Can grab players. Break free quickly or have teammates assist.",
                    shrinkModifier: 2.0
                },
                {
                    name: "Slasher",
                    type: "lesser",
                    health: { head: 20, body: 65 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Head shots", "Medium range engagement"],
                    tactics: "Fast melee attacker. Keep distance and aim for head.",
                    shrinkModifier: 2.0
                },
                {
                    name: "Stalker", 
                    type: "lesser",
                    health: { head: 20, body: 80 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Detection", "Area damage when invisible"],
                    tactics: "Becomes invisible. Listen for breathing sounds. Commando can see them clearly.",
                    shrinkModifier: 2.0,
                    special: "Invisibility when not attacking"
                },
                {
                    name: "Crawler",
                    type: "lesser",
                    health: { head: 65, body: 130 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 0.5 },
                    weaknesses: ["Fire damage", "Explosives"],
                    tactics: "Weak to fire. Elite variants explode into gas when killed by body shots.",
                    shrinkModifier: 2.0,
                    special: "Elite version creates toxic gas on death"
                },
                {
                    name: "Gorefast",
                    type: "lesser",
                    health: { head: 80, body: 210 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Head shots", "High caliber rounds"],
                    tactics: "Blade arm can be severed. Becomes less dangerous without weapon.",
                    shrinkModifier: 0.6
                },
                {
                    name: "Gorefiend",
                    type: "medium",
                    health: { head: 120, body: 390 },
                    resistances: { ballistic: 0.75, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["Explosives", "High damage single shots"],
                    tactics: "Dual blades, high damage. Can parry shots. Use explosives or overwhelming firepower.",
                    shrinkModifier: 0.4,
                    special: "Can block/parry incoming shots"
                },
                {
                    name: "Bloat",
                    type: "medium",
                    health: { head: 100, body: 500 },
                    resistances: { ballistic: 0.5, explosive: 0.75, fire: 1.0, toxic: 0.1 },
                    weaknesses: ["Fire damage", "Head shots from range"],
                    tactics: "Highly resistant to ballistic. Spits toxic bile. Keep distance, use fire weapons.",
                    shrinkModifier: 0.25,
                    special: "Toxic bile projectiles and death explosion"
                },
                {
                    name: "Siren",
                    type: "medium", 
                    health: { head: 100, body: 300 },
                    resistances: { ballistic: 1.0, explosive: 0.5, fire: 1.0 },
                    weaknesses: ["Ballistic damage", "Silent takedowns"],
                    tactics: "Screams destroy explosives and projectiles. Use hitscan weapons, avoid explosives.",
                    shrinkModifier: 0.7,
                    special: "Sonic scream destroys explosives in flight"
                },
                {
                    name: "Husk",
                    type: "medium",
                    health: { head: 100, body: 300 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 0.1 },
                    weaknesses: ["Ballistic to backpack", "Precision shots"],
                    tactics: "Shoot the fuel tank on back for massive damage. Immune to fire. Can suicide bomb when low health.",
                    shrinkModifier: 0.7,
                    special: "Fuel tank weak point, fire immunity, suicide explosion"
                },
                {
                    name: "E.D.A.R (Trapper)",
                    type: "medium",
                    health: { head: 150, body: 450 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0, emp: 2.0 },
                    weaknesses: ["EMP damage", "Chest core targeting"],
                    tactics: "Robotic unit. Vulnerable to EMP. Target the chest core for critical damage.",
                    shrinkModifier: 0.7,
                    special: "Deploys nets to trap players"
                },
                {
                    name: "Quarter Pound",
                    type: "large",
                    health: { head: 600, body: 1200 },
                    resistances: { ballistic: 1.0, explosive: 0.75, fire: 1.0 },
                    weaknesses: ["High damage weapons", "Coordinated team fire"],
                    tactics: "Mini Fleshpound. Less health but still dangerous. Can rage. Focus fire to down quickly.",
                    shrinkModifier: 0.2,
                    special: "Rage mode increases speed and damage"
                },
                {
                    name: "Scrake",
                    type: "large", 
                    health: { head: 1600, body: 4800 },
                    resistances: { ballistic: 1.0, explosive: 0.25, fire: 1.0, rpgImpact: 4.0 },
                    weaknesses: ["RPG ballistic impact", "High DPS weapons", "Head shots"],
                    tactics: "Resistant to explosives but vulnerable to RPG ballistic impact. Don't enrage - use high DPS for quick kills.",
                    shrinkModifier: 0.1,
                    special: "Chainsaw rage mode triggered by body damage"
                },
                {
                    name: "Fleshpound",
                    type: "large",
                    health: { head: 1500, body: 6000 },
                    resistances: { ballistic: 1.0, explosive: 1.0, fire: 1.0 },
                    weaknesses: ["EMP grenades", "Coordinated high DPS"],
                    tactics: "Extremely dangerous when raged. Use EMP to calm down. Requires team coordination.",
                    shrinkModifier: 0.1,
                    special: "Pounds fists to build rage, EMP can reset rage"
                }
            ],
            
            bosses: [
                {
                    name: "Hans Volter",
                    difficulty: 3,
                    health: { total: 8500 },
                    phases: [
                        {
                            name: "Green Phase", 
                            description: "Initial spawn, uses assault rifles and grenades",
                            tactics: "Maintain distance, avoid grenade spam, focus fire"
                        },
                        {
                            name: "Shield Phase",
                            description: "Activates protective shield, attempts healing drains",
                            tactics: "Break shield with concentrated fire, avoid being grabbed"
                        },
                        {
                            name: "Final Phase",
                            description: "Increased aggression, more frequent abilities",
                            tactics: "Stay mobile, watch for poison gas, finish quickly"
                        }
                    ],
                    weaknesses: [
                        { damage: "Explosive", rank: 1, description: "Highly vulnerable to RPGs and grenades" },
                        { damage: "Fire", rank: 2, description: "Takes increased fire damage" },
                        { damage: "Ballistic", rank: 3, description: "Standard ballistic effectiveness" }
                    ],
                    resistances: { 
                        ballistic: 1.0, 
                        explosive: 1.5, 
                        fire: 1.25,
                        nerveGas: 0.1
                    },
                    tactics: "Keep distance from grab range. Break shield immediately. Use Firebug and Demo classes.",
                    specialMechanics: "Calls out attacks, health drain grab, nerve gas immunity"
                },
                {
                    name: "Patriarch",
                    difficulty: 4,
                    health: { total: 9000 },
                    phases: [
                        {
                            name: "Ranged Phase",
                            description: "Uses rocket launcher and minigun",
                            tactics: "Use cover, dodge rockets, sustained fire"
                        },
                        {
                            name: "Invisible Phase", 
                            description: "Becomes invisible, summons minions",
                            tactics: "Clear minions first, watch for shimmer effect"
                        },
                        {
                            name: "Berserker Phase",
                            description: "Melee focused, high damage attacks",
                            tactics: "Kite around obstacles, team coordination essential"
                        }
                    ],
                    weaknesses: [
                        { damage: "Ballistic (Chest/Right Arm)", rank: 1, description: "2x damage to chest and right arm" },
                        { damage: "Explosive", rank: 2, description: "Good damage, watch splash" },
                        { damage: "Fire", rank: 3, description: "Standard fire effectiveness" }
                    ],
                    resistances: { 
                        ballistic: 1.0, 
                        explosive: 1.0, 
                        fire: 1.0,
                        leftArm: 0.5,
                        leftLeg: 0.2
                    },
                    tactics: "Target weak spots (chest, right arm). Avoid damaged left side. Prepare for invisibility phases.",
                    specialMechanics: "Invisibility, minion spawning, healing syringes, weak spot targeting"
                },
                {
                    name: "King Fleshpound",
                    difficulty: 4,
                    health: { total: 12000 },
                    phases: [
                        {
                            name: "Initial Phase",
                            description: "Standard attacks, spawns regular Fleshpounds",
                            tactics: "Deal with minions first, focus fire on King"
                        },
                        {
                            name: "Shield Phase",
                            description: "Activates energy shield",
                            tactics: "Destroy shield with sustained fire"
                        },
                        {
                            name: "Rage Phase",
                            description: "Permanent rage state, increased speed",
                            tactics: "Maintain distance, use EMP if available"
                        }
                    ],
                    weaknesses: [
                        { damage: "EMP", rank: 1, description: "Calms rage, disables temporarily" },
                        { damage: "High DPS Ballistic", rank: 2, description: "Sustained automatic fire" },
                        { damage: "Explosive", rank: 3, description: "Good damage but watch range" }
                    ],
                    resistances: { 
                        ballistic: 1.0, 
                        explosive: 1.0, 
                        fire: 1.0
                    },
                    tactics: "Use EMP grenades to control rage. Focus fire to break shield. Clear minion Fleshpounds immediately.",
                    specialMechanics: "Spawns Fleshpound minions, energy shield, EMP vulnerability, rage control"
                },
                {
                    name: "Abomination",
                    difficulty: 2,
                    health: { total: 7000 },
                    phases: [
                        {
                            name: "Ranged Phase",
                            description: "Spits toxic bile, spawns minions",
                            tactics: "Stay at range, clear minions, avoid bile"
                        },
                        {
                            name: "Armor Phase",
                            description: "Heavily armored, resistant to non-fragmentation",
                            tactics: "Use fragmentation grenades only for armor damage"
                        },
                        {
                            name: "Rage Phase",
                            description: "Charges players, melee focus",
                            tactics: "Kite around environment, maintain distance"
                        }
                    ],
                    weaknesses: [
                        { damage: "Fragmentation", rank: 1, description: "Only damage type effective against armor" },
                        { damage: "Any (Post-armor)", rank: 2, description: "Standard damage once armor is destroyed" },
                        { damage: "Range", rank: 3, description: "Distance negates most abilities" }
                    ],
                    resistances: { 
                        allNonFrag: 0.0,
                        ballistic: 1.0,
                        explosive: 1.0,
                        toxic: 0.1
                    },
                    tactics: "Use only fragmentation grenades against armor. Keep maximum distance. Clear explosive minions immediately.",
                    specialMechanics: "Armor immunity (except frag), toxic bile, explosive minions, toxic mine deployment"
                },
                {
                    name: "Matriarch",
                    difficulty: 5,
                    health: { total: 15000 },
                    phases: [
                        {
                            name: "Mech Phase",
                            description: "Full mech suit, all weapons available",
                            tactics: "Focus on weak points, avoid tesla blasts"
                        },
                        {
                            name: "Damaged Phase",
                            description: "Mech partially destroyed, spawns E.D.A.R support",
                            tactics: "Clear E.D.A.R units immediately, continue pressure"
                        },
                        {
                            name: "Berserker Phase",
                            description: "Exits mech, melee focused, high mobility",
                            tactics: "Extreme kiting required, team coordination essential"
                        }
                    ],
                    weaknesses: [
                        { damage: "EMP", rank: 1, description: "Disables mech systems temporarily" },
                        { damage: "High DPS Ballistic", rank: 2, description: "Sustained automatic weapons" },
                        { damage: "Explosive (Range)", rank: 3, description: "Good damage but dangerous close range" }
                    ],
                    resistances: { 
                        ballistic: 1.0, 
                        explosive: 1.0, 
                        fire: 1.0,
                        electric: 0.5
                    },
                    tactics: "Most dangerous boss. Use EMP extensively. Clear E.D.A.R support immediately. Maintain maximum distance.",
                    specialMechanics: "Mech suit, tesla weapons, E.D.A.R spawning, lightning storm, phase transitions"
                }
            ],

            damageTypes: [
                {
                    name: "Ballistic",
                    category: "Physical",
                    description: "Standard bullet and projectile damage",
                    subtypes: ["Handgun", "Rifle", "Shotgun", "SMG"],
                    effectiveness: "Universal damage type, reliable against most enemies",
                    weapons: ["9mm Pistol", "AK-12", "AA-12", "MP7"],
                    modifiers: "Affected by perk bonuses and ZED resistances"
                },
                {
                    name: "Explosive", 
                    category: "Physical",
                    description: "Area damage from explosions",
                    subtypes: ["Grenade", "Rocket", "C4"],
                    effectiveness: "High damage, area effect, some ZED resistances",
                    weapons: ["RPG-7", "M79", "C4", "Dynamite"],
                    modifiers: "Affects body health only, ignores head multipliers"
                },
                {
                    name: "Fire",
                    category: "Elemental", 
                    description: "Heat damage with DOT effects",
                    subtypes: ["Flame", "Incendiary"],
                    effectiveness: "Good vs Crawlers, poor vs Husks",
                    weapons: ["Flamethrower", "Microwave Gun", "Incendiary Shotgun"],
                    modifiers: "DOT continues after initial hit, reduced when healing"
                },
                {
                    name: "Toxic",
                    category: "Elemental",
                    description: "Poison damage with lingering effects", 
                    subtypes: ["Poison", "Acid"],
                    effectiveness: "DOT damage, panic effect on ZEDs",
                    weapons: ["Hemogoblin", "Bloat bile"],
                    modifiers: "Causes ZED panic behavior, stacks with other DOTs"
                },
                {
                    name: "Piercing",
                    category: "Physical",
                    description: "Sharp projectiles and melee weapons",
                    subtypes: ["Arrow", "Spike", "Stab"],
                    effectiveness: "Good precision damage, some armor penetration",
                    weapons: ["Crossbow", "Knife stab attacks"],
                    modifiers: "Can penetrate through multiple enemies"
                },
                {
                    name: "Slashing",
                    category: "Physical", 
                    description: "Cutting damage from bladed weapons",
                    subtypes: ["Blade", "Slash"],
                    effectiveness: "Standard melee damage type",
                    weapons: ["Katana", "Knife", "Machete"],
                    modifiers: "Affected by berserker bonuses"
                },
                {
                    name: "Bludgeon",
                    category: "Physical",
                    description: "Blunt force trauma damage",
                    subtypes: ["Blunt", "Impact"],
                    effectiveness: "High stumble power, good vs armor",
                    weapons: ["Pulverizer", "Bone Crusher"],
                    modifiers: "High knockdown and stumble values"
                },
                {
                    name: "Microwave",
                    category: "Elemental",
                    description: "Electromagnetic radiation damage",
                    subtypes: ["Microwave"],
                    effectiveness: "Unique damage type, causes bloating effect",
                    weapons: ["Microwave Gun"],
                    modifiers: "Causes ZEDs to bloat and explode"
                }
            ],

            mechanics: [
                {
                    title: "Damage Over Time (DOT)",
                    description: "Continuous damage effects applied after initial hit",
                    details: "DOT calculation uses default weapon damage, not actual damage taken by ZED due to resistances. Fire DOT is reduced by 50% when player is being healed.",
                    formula: "DOT = Base_Weapon_Damage × DOT_Percentage",
                    examples: ["Fire: 80% of weapon damage per tick", "Toxic: Variable based on weapon", "Microwave: Causes bloating effect"]
                },
                {
                    title: "Incapacitation System",
                    description: "Various status effects that disable or impair ZEDs",
                    details: "All afflictions use hidden meters that build up with weapon incap power. When threshold reached, ZED becomes afflicted.",
                    types: ["Stun", "Knockdown", "Stumble", "Freeze", "Snare", "EMP"],
                    interactions: "Only one of Stun/Knockdown/Stumble/Freeze can be active at once"
                },
                {
                    title: "Head vs Body Health",
                    description: "ZEDs have separate health pools for head and body",
                    details: "Explosive damage only affects body health. Head health reduction to 0 causes decapitation but ZED can still live temporarily.",
                    mechanics: "Ballistic impact affects both head and body simultaneously based on hit location"
                },
                {
                    title: "ZED Resistances",
                    description: "Damage multipliers applied based on ZED type and damage source",
                    details: "Each ZED has specific resistance values for different damage types. Some body parts have different resistance values.",
                    examples: ["Bloat: 50% ballistic resistance", "Scrake: 25% explosive resistance", "Husk: 10% fire resistance"]
                },
                {
                    title: "Shrink Mechanics", 
                    description: "Size reduction system affecting ZED damage taken",
                    details: "For every 100 shrink power, ZED's size reduces. At maximum shrink (10 effect), ZED takes 2x damage from all sources.",
                    formula: "Shrink_Effect = (Shrink_Power / 100) × ZED_Shrink_Modifier",
                    modifiers: "Clots: 2.0x, Scrake/FP: 0.1x, Bosses: 0.15x (cannot be killed by shrinking)"
                },
                {
                    title: "Door Mechanics",
                    description: "Welding and door destruction systems",
                    details: "Doors take increasing damage based on number of attackers (up to 2x with 10 ZEDs). Support can repair destroyed doors.",
                    repair: "Each welder use restores 7 points, door restored at 255 total points"
                }
            ]
        };

        // UI Management System
        class _UIManager {
            constructor() {
                this._currentTab = 'enemies';
                this._filteredData = {};
                this._colorblindMode = this._loadColorblindPreference();
                this._initializeUI();
                this._bindEvents();
                this._renderInitialContent();
                this._applyInitialColorblindState();
            }

            _loadColorblindPreference() {
                // Note: localStorage not available in Claude.ai artifacts
                // Uncomment line below when deploying to your own environment:
                return localStorage.getItem('kf2_colorblind_mode') === 'true';
                return false; // Default for artifact environment
            }

            _saveColorblindPreference(enabled) {
                // Note: localStorage not available in Claude.ai artifacts  
                // Uncomment line below when deploying to your own environment:
                 localStorage.setItem('kf2_colorblind_mode', enabled.toString());
                console.log(`Colorblind mode preference would be saved: ${enabled}`);
            }

            _applyInitialColorblindState() {
                if (this._colorblindMode) {
                    $('body').addClass('colorblind-mode');
                    $('#colorblind-toggle').text('🎨 Standard Mode');
                    $('#standard-legend').hide();
                    $('#colorblind-legend').show();
                }
            }

            _initializeUI() {
                // Tab navigation setup
                $('.tab-btn').on('click', (e) => {
                    const targetTab = $(e.target).data('tab');
                    this._switchTab(targetTab);
                });

                // Colorblind accessibility toggle
                $('#colorblind-toggle').on('click', () => {
                    this._toggleColorblindMode();
                });

                // Search functionality
                this._setupSearchHandlers();
                
                // Filter functionality
                this._setupFilterHandlers();
            }

            _toggleColorblindMode() {
                this._colorblindMode = !this._colorblindMode;
                
                // Save preference for future visits
                this._saveColorblindPreference(this._colorblindMode);
                
                if (this._colorblindMode) {
                    $('body').addClass('colorblind-mode');
                    $('#colorblind-toggle').text('🎨 Standard Mode');
                    $('#standard-legend').hide();
                    $('#colorblind-legend').show();
                } else {
                    $('body').removeClass('colorblind-mode');
                    $('#colorblind-toggle').text('🎨 Colorblind Mode');
                    $('#standard-legend').show();
                    $('#colorblind-legend').hide();
                }
                
                // Re-render current tab content to update visual indicators
                this._renderTabContent(this._currentTab);
            }

            _bindEvents() {
                // Dynamic content loading based on tab selection
                $(document).on('click', '.card', (e) => {
                    this._handleCardInteraction(e);
                });
            }

            _switchTab(tabName) {
                $('.tab-btn').removeClass('active');
                $(`.tab-btn[data-tab="${tabName}"]`).addClass('active');
                
                $('.tab-content').removeClass('active');
                $(`#${tabName}`).addClass('active');
                
                this._currentTab = tabName;
                this._renderTabContent(tabName);
            }

            _setupSearchHandlers() {
                $('#enemy-search').on('input', (e) => {
                    this._filterEnemies(e.target.value);
                });

                $('#boss-search').on('input', (e) => {
                    this._filterBosses(e.target.value);
                });

                $('#damage-search').on('input', (e) => {
                    this._filterDamageTypes(e.target.value);
                });
            }

            _setupFilterHandlers() {
                $('.filter-btn').on('click', (e) => {
                    $('.filter-btn').removeClass('active');
                    $(e.target).addClass('active');
                    
                    const filterType = $(e.target).data('filter');
                    this._applyEnemyFilter(filterType);
                });
            }

            _renderInitialContent() {
                this._renderEnemies();
                this._renderBosses(); 
                this._renderDamageTypes();
                this._renderMechanics();
                this._renderTactics();
            }

            _renderTabContent(tabName) {
                switch(tabName) {
                    case 'enemies':
                        this._renderEnemies();
                        break;
                    case 'bosses':
                        this._renderBosses();
                        break;
                    case 'damage-types':
                        this._renderDamageTypes();
                        break;
                    case 'mechanics':
                        this._renderMechanics();
                        break;
                    case 'tactics':
                        this._renderTactics();
                        break;
                }
            }

            _renderEnemies() {
                const grid = $('#enemy-grid');
                grid.empty();

                _kf2Data.enemies.forEach(enemy => {
                    const card = this._createEnemyCard(enemy);
                    grid.append(card);
                });
            }

            _createEnemyCard(enemy) {
                const resistancesList = Object.entries(enemy.resistances)
                    .map(([type, value]) => {
                        const effectiveness = value > 1 ? 'effective' : value < 1 ? 'resistant' : 'neutral';
                        const percentage = Math.round(value * 100);
                        let statusText = '';
                        let statusIcon = '';
                        
                        if (this._colorblindMode) {
                            // Colorblind-friendly indicators
                            if (value > 1) {
                                statusText = 'HIGHLY EFFECTIVE';
                                statusIcon = '⬆️';
                            } else if (value < 1) {
                                statusText = 'RESISTANT';
                                statusIcon = '⬇️';
                            } else {
                                statusText = 'NORMAL';
                                statusIcon = '➡️';
                            }
                        } else {
                            // Standard color indicators
                            if (value > 1) {
                                statusText = 'HIGHLY EFFECTIVE';
                                statusIcon = '🟢';
                            } else if (value < 1) {
                                statusText = 'RESISTANT';
                                statusIcon = '🔴';
                            } else {
                                statusText = 'NORMAL';
                                statusIcon = '🟡';
                            }
                        }
                        
                        return `
                            <div class="damage-item damage-${effectiveness}">
                                <span>${statusIcon} ${type.charAt(0).toUpperCase() + type.slice(1)}</span>
                                <span>${percentage}% - ${statusText}</span>
                            </div>
                        `;
                    }).join('');

                const weaknessesList = enemy.weaknesses.map(weakness => 
                    `<li>• ${weakness}</li>`
                ).join('');

                return `
                    <div class="card" data-type="${enemy.type}" data-name="${enemy.name.toLowerCase()}">
                        <div class="card-header">
                            <h3 class="card-title">${enemy.name}</h3>
                            <span class="card-type">${enemy.type}</span>
                        </div>
                        <div class="card-content">
                            <p><strong>Health:</strong> Head: ${enemy.health.head} | Body: ${enemy.health.body}</p>
                            <p><strong>Shrink Modifier:</strong> ${enemy.shrinkModifier}x</p>
                            ${enemy.special ? `<p><strong>Special:</strong> ${enemy.special}</p>` : ''}
                            
                            <div class="damage-list">
                                <h4>Damage Effectiveness Against This Enemy:</h4>
                                ${resistancesList}
                            </div>
                            
                            <div>
                                <h4>Weaknesses:</h4>
                                <ul>${weaknessesList}</ul>
                            </div>
                            
                            <div>
                                <h4>Tactics:</h4>
                                <p>${enemy.tactics}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            _renderBosses() {
                const grid = $('#boss-grid');
                grid.empty();

                _kf2Data.bosses.forEach(boss => {
                    const card = this._createBossCard(boss);
                    grid.append(card);
                });
            }

            _createBossCard(boss) {
                const phasesList = boss.phases.map(phase => `
                    <div class="phase">
                        <div class="phase-title">${phase.name}</div>
                        <p>${phase.description}</p>
                        <p><strong>Tactics:</strong> ${phase.tactics}</p>
                    </div>
                `).join('');

                const weaknessesList = boss.weaknesses.map(weakness => `
                    <div class="damage-item damage-effective">
                        <span>
                            <span class="weakness-rank">${weakness.rank}</span>
                            ${weakness.damage}
                        </span>
                        <span class="tooltip" data-tooltip="${weakness.description}">ⓘ</span>
                    </div>
                `).join('');

                const difficultyStars = '★'.repeat(boss.difficulty) + '☆'.repeat(5 - boss.difficulty);

                return `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">${boss.name}</h3>
                            <span class="card-type">Difficulty: ${difficultyStars}</span>
                        </div>
                        <div class="card-content">
                            <p><strong>Health:</strong> ${boss.health.total}</p>
                            <p><strong>Special Mechanics:</strong> ${boss.specialMechanics}</p>
                            
                            <div class="boss-phases">
                                <h4>Boss Phases:</h4>
                                ${phasesList}
                            </div>
                            
                            <div class="damage-list">
                                <h4>Best Damage Types (Ranked):</h4>
                                ${weaknessesList}
                            </div>
                            
                            <div>
                                <h4>Key Tactics:</h4>
                                <p>${boss.tactics}</p>
                            </div>
                        </div>
                    </div>
                `;
            }

            _renderDamageTypes() {
                const grid = $('#damage-grid');
                grid.empty();

                _kf2Data.damageTypes.forEach(damageType => {
                    const card = this._createDamageCard(damageType);
                    grid.append(card);
                });
            }

            _createDamageCard(damageType) {
                const subtypesList = damageType.subtypes?.map(subtype => 
                    `<span style="background: rgba(255,107,53,0.2); padding: 2px 8px; border-radius: 10px; margin: 2px; display: inline-block;">${subtype}</span>`
                ).join('') || '';

                const weaponsList = damageType.weapons?.map(weapon => 
                    `<li>• ${weapon}</li>`
                ).join('') || '';

                return `
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">${damageType.name}</h3>
                            <span class="card-type">${damageType.category}</span>
                        </div>
                        <div class="card-content">
                            <p>${damageType.description}</p>
                            
                            ${subtypesList ? `
                                <div style="margin: 10px 0;">
                                    <strong>Subtypes:</strong><br>
                                    ${subtypesList}
                                </div>
                            ` : ''}
                            
                            <p><strong>Effectiveness:</strong> ${damageType.effectiveness}</p>
                            
                            ${weaponsList ? `
                                <div>
                                    <h4>Example Weapons:</h4>
                                    <ul>${weaponsList}</ul>
                                </div>
                            ` : ''}
                            
                            <div class="code-snippet">
                                <strong>Modifiers:</strong> ${damageType.modifiers}
                            </div>
                        </div>
                    </div>
                `;
            }

            _renderMechanics() {
                const grid = $('#mechanics-grid');
                grid.empty();

                _kf2Data.mechanics.forEach(mechanic => {
                    const section = this._createMechanicSection(mechanic);
                    grid.append(section);
                });
            }

            _createMechanicSection(mechanic) {
                let content = `
                    <div class="mechanic-section">
                        <h3 class="mechanic-title">${mechanic.title}</h3>
                        <p class="mechanic-description">${mechanic.description}</p>
                        <p><strong>Details:</strong> ${mechanic.details}</p>
                `;

                if (mechanic.formula) {
                    content += `<div class="code-snippet">${mechanic.formula}</div>`;
                }

                if (mechanic.examples) {
                    content += `
                        <div>
                            <strong>Examples:</strong>
                            <ul>
                                ${mechanic.examples.map(example => `<li>• ${example}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }

                if (mechanic.types) {
                    content += `
                        <div>
                            <strong>Types:</strong>
                            <ul>
                                ${mechanic.types.map(type => `<li>• ${type}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }

                if (mechanic.interactions) {
                    content += `<p><strong>Interactions:</strong> ${mechanic.interactions}</p>`;
                }

                if (mechanic.mechanics) {
                    content += `<p><strong>Mechanics:</strong> ${mechanic.mechanics}</p>`;
                }

                if (mechanic.modifiers) {
                    content += `<div class="code-snippet">${mechanic.modifiers}</div>`;
                }

                if (mechanic.repair) {
                    content += `<p><strong>Repair:</strong> ${mechanic.repair}</p>`;
                }

                content += '</div>';
                return content;
            }

            _renderTactics() {
                const grid = $('#tactics-grid');
                grid.empty();

                const tacticalGuides = [
                    {
                        title: "Boss Priority Ranking",
                        content: `
                            <div class="damage-list">
                                <div class="damage-item damage-resistant">
                                    <span><span class="weakness-rank">1</span>Matriarch</span>
                                    <span>Extreme Threat</span>
                                </div>
                                <div class="damage-item damage-neutral">
                                    <span><span class="weakness-rank">2</span>Patriarch</span>
                                    <span>High Threat</span>
                                </div>
                                <div class="damage-item damage-neutral">
                                    <span><span class="weakness-rank">3</span>King Fleshpound</span>
                                    <span>High Threat</span>
                                </div>
                                <div class="damage-item damage-effective">
                                    <span><span class="weakness-rank">4</span>Hans Volter</span>
                                    <span>Moderate Threat</span>
                                </div>
                                <div class="damage-item damage-effective">
                                    <span><span class="weakness-rank">5</span>Abomination</span>
                                    <span>Low Threat</span>
                                </div>
                            </div>
                        `
                    },
                    {
                        title: "Damage Type Effectiveness Chart",
                        content: `
                            <div class="code-snippet">
                                <strong>Universal Effectiveness:</strong><br>
                                🟢 Ballistic → Most ZEDs (reliable choice)<br>
                                🟡 Explosive → Good AoE, some resistances<br>
                                🟢 Fire → Excellent vs Crawlers, poor vs Husks<br>
                                🟡 EMP → Essential for Fleshpounds & EDARs<br>
                                🔴 Toxic → Situational, good DOT
                            </div>
                        `
                    },
                    {
                        title: "Team Composition Guide",
                        content: `
                            <p><strong>Optimal 6-Player Setup:</strong></p>
                            <ul>
                                <li>• <strong>Commando:</strong> Trash clearing, Stalker detection</li>
                                <li>• <strong>Support:</strong> Door management, ammo supply</li>
                                <li>• <strong>Demolitionist:</strong> Large ZED elimination</li>
                                <li>• <strong>Gunslinger:</strong> Precision large ZED takedowns</li>
                                <li>• <strong>Field Medic:</strong> Team sustainability</li>
                                <li>• <strong>Berserker:</strong> Frontline tank, emergency clearing</li>
                            </ul>
                        `
                    },
                    {
                        title: "Critical Engagement Rules",
                        content: `
                            <div class="phase">
                                <div class="phase-title">DO NOT Enrage Scrakes</div>
                                <p>Use high DPS takedowns or RPG ballistic impact. Body damage causes chainsaw rage.</p>
                            </div>
                            <div class="phase">
                                <div class="phase-title">EMP is Essential</div>
                                <p>Berserker EMP grenades can save the team from raged Fleshpounds and disable EDARs.</p>
                            </div>
                            <div class="phase">
                                <div class="phase-title">Boss Shield Priority</div>
                                <p>Always focus fire on boss shields immediately - they prevent damage and enable healing.</p>
                            </div>
                        `
                    }
                ];

                tacticalGuides.forEach(guide => {
                    const section = `
                        <div class="mechanic-section">
                            <h3 class="mechanic-title">${guide.title}</h3>
                            ${guide.content}
                        </div>
                    `;
                    grid.append(section);
                });
            }

            _filterEnemies(searchTerm) {
                const cards = $('#enemy-grid .card');
                cards.each((index, card) => {
                    const $card = $(card);
                    const name = $card.data('name');
                    const isVisible = name.includes(searchTerm.toLowerCase());
                    $card.toggle(isVisible);
                });
            }

            _filterBosses(searchTerm) {
                const cards = $('#boss-grid .card');
                cards.each((index, card) => {
                    const $card = $(card);
                    const text = $card.text().toLowerCase();
                    const isVisible = text.includes(searchTerm.toLowerCase());
                    $card.toggle(isVisible);
                });
            }

            _filterDamageTypes(searchTerm) {
                const cards = $('#damage-grid .card');
                cards.each((index, card) => {
                    const $card = $(card);
                    const text = $card.text().toLowerCase();
                    const isVisible = text.includes(searchTerm.toLowerCase());
                    $card.toggle(isVisible);
                });
            }

            _applyEnemyFilter(filterType) {
                const cards = $('#enemy-grid .card');
                if (filterType === 'all') {
                    cards.show();
                } else {
                    cards.each((index, card) => {
                        const $card = $(card);
                        const type = $card.data('type');
                        $card.toggle(type === filterType);
                    });
                }
            }

            _handleCardInteraction(e) {
                const $card = $(e.currentTarget);
                $card.find('.card-content').toggle();
            }
        }

        // Initialize Application
        $(document).ready(() => {
            new _UIManager();
        });
    </script>
</body>
</html>
